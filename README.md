# ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œë°œí™˜ê²½ ìƒì„¸ ë¶„ì„

## ì˜ë¬¸ì 

- [ ] babel preset ë°°ì—´ì€ last to first ìˆœì„œì¸ë°, ì™œ preset-env ì™€ preset-typescript ëŠ” ìˆœì„œì— ìƒê´€ì—†ì´ ì˜ ë™ì‘í•˜ëŠ”ê°€? preset-env ê°€ ë¨¼ì € ì ìš©ë˜ë©´ .ts ë¥¼ ì»´íŒŒì¼í•˜ì§€ ëª»í•´ì„œ ì—ëŸ¬ë¥¼ ë°œìƒí•´ì•¼ í•  ê²ƒ ê°™ì€ë° ...

## TODO

- [x] ë°”ë²¨ 
- [ğŸƒâ€ï¸] ì›¹íŒ©
- [ ] ì›¹íŒ© ì»¤ìŠ¤í…€ ë¡œë”
- [ ] ì›¹íŒ© ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸
- [ ] HMR (Hot Module Replacement) ë¶„ì„ê³¼ êµ¬í˜„
- [ ] ëª¨ë…¸ë ˆí¬
- [ ] TypeScript
- [ ] ESLint
- [ ] Prettier
- [ ] react, vue SSR ì„œë²„ êµ¬ì¶•
- [ ] react, vue, svelte ê°œë°œí™˜ê²½ êµ¬ì¶•

- [ ] Yarn
- [ ] NPM
- [ ] NPX
- [ ] PNPM

- [ ] Jest

- [ ] Rollup
- [ ] Vite
- [ ] Parcel
- [ ] Gulp

- [ ] ëª¨ë…¸ë ˆí¬ë¡œ ë§Œë“¤ì–´ì„œ ê³µí†µ, ê°œë³„ ì„¤ì • í•´ë³´ê¸°

## ì¢…í•© ë©”ëª¨

- ë°”ë²¨, ì›¹íŒ©ì—ì„œ ì—­ìˆœìœ¼ë¡œ ì ìš©ë˜ëŠ” ê²ƒë“¤ì€
  - ë°”ë²¨ : presets
  - ì›¹íŒ© : loader

## ë‚´ ìƒê°

- ~~ë°”ë²¨ì˜ ëŒ€ì•ˆì€ ë”±íˆ ì—†ëŠ” ê²ƒ ê°™ë‹¤.~~ ~~(SWC ëŠ” ì•„ì§ ìƒíƒœê³„ê°€ ë¶€ì¡±í•˜ì§€ì•Ÿë‚˜..?)~~
- ë°”ë²¨ì˜ ëŒ€ì•ˆì€ ë¯¸ë˜ ì°½ì°½í•œ SWC ì´ë‹¤!
- `parcel` ì€ ì ìœ ìœ¨ì„ ìƒê°í•´ ë´¤ì„ë•Œ êµ³ì´ ì•ˆë°°ì›Œë„ ë ê²ƒ ê°™ë‹¤..
- ë²ˆë“¤ëŸ¬ íˆ´ ì¤‘ì—ì„œëŠ” ì›¹íŒ©ì´ ì••ë„ì ì´ë‹¤. í•˜ì§€ë§Œ `rollup` ê³¼ `vite` ì˜ DX ê°€ ë›°ì–´ë‚˜ì„œ ì¶”ê°€ë¡œ ë°°ì›Œë³´ê¸° ì¢‹ì„ ê²ƒ ê°™ë‹¤.
- ê°œë°œí™˜ê²½ì„ ì„¸íŒ…í•œë‹¤ê³  í•˜ë©´ ë°”ë²¨, swc ë¡œë§Œ í•˜ë ¤ê³  í•˜ê¸° ë³´ë‹¤ëŠ”, webpack or rollup or vite ì™€ ê°™ì€ ë²ˆë“¤ëŸ¬ë¡œ ì‹œì‘í•´ì•¼í•œë‹¤ëŠ” ìƒê°ì„ í•˜ëŠ”ê²Œ ì¢‹ë‹¤.(ì–´ì°¨í”¼ ì“°ëŠ”ê²Œ ë§˜í¸í•˜ë‹¤)

## ë°”ë²¨

> ~~ğŸš¨ ë°”ë²¨ì€ ì½”ë“œê°€ ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‘í•˜ë„ë¡ ì»´íŒŒì¼ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. **ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‘í•˜ë„ë¡ í•˜ë ¤ë©´ webpack ê³¼ ê°™ì€ ë²ˆë“¤ëŸ¬ì˜ ì—­í• ì…ë‹ˆë‹¤.**~~
> ë°”ë²¨ì€ @babel/preset-env ë¥¼ í†µí•´ì„œ "modules" ê°’ì— ë”°ë¼ì„œ module ì‹œìŠ¤í…œì— ë§ì¶° ì»´íŒŒì¼ì„ í•´ì¤€ë‹¤.
> default ê°’ì€ node ì´ë©°, ì´ë–„ëŠ” commonjs ëª¨ë“ˆì„ ì‚¬ìš©í•˜ê³ , modules:false ì¼ ì‹œì—ëŠ” ESModule ë¥¼ ì‚¬ìš©í•œë‹¤.
> ë‹¨, modules:false ë¼ë„ ì›ë³¸ ì†ŒìŠ¤ì½”ë“œê°€ commonjs ë¼ë©´ ê·¸ê²ƒì„ ESModule ë¡œ ë³€ê²½í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

> ìµœì‹  ë¬¸ë²•ì„ ì§€ì›í•˜ê¸° ìœ„í•¨ì´ ì²« ë²ˆì§¸ ëª©ì ì¸ë°, ì‚¬ì‹¤ìƒ ìš”ì¦˜ ë¸Œë¼ìš°ì €ëŠ” ECMAScript ë¥¼ ìµœì‹ ë²„ì „ê¹Œì§€ ì˜ ì§€ì›í•˜ê³  ìˆì–´ì„œ, ì´ì œëŠ” ê·¸ì € í•„ìš”í•œ ë¬¸ë²•ì„ íŒŒì‹±í•˜ëŠ” ê²ƒì´ ì£¼ëœ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒ ê°™ë‹¤?(ë¬¼ë¡  êµ¬ ë¸Œë¼ìš°ì € ì‚¬ìš©ìë¥¼ ìœ„í•¨ì´ì§€ë§Œ.. ê±°ì˜ ì•ˆì“°ë‹ˆ)

- ë°”ë²¨ë¡œ ì»´íŒŒì¼ëœ `.js` íŒŒì¼ì€ ë¸Œë¼ìš°ì € ìš©ì´ ì•„ë‹ˆë‹¤. `target` ì„ ë¸Œë¼ìš°ì € ë²„ì „ìœ¼ë¡œ ì–´ëŠ ì •ë„ê¹Œì§€ í´ë¦¬í•„ì´ í•„ìš”í•œì§€ë¥¼ íŒŒì•…í•˜ëŠ”ë° ì‚¬ìš©ë  ë¿, ë¸Œë¼ìš°ì €ì— ëŒì•„ê°ˆ ì½”ë“œë¡œ ë³€í™˜ì€ ë²ˆë“¤ëŸ¬ê°€ í•´ì•¼í•œë‹¤. **(ëª¨ë“ˆì²˜ë¦¬)**
- core js ë¡œ í´ë¦¬í•„ í•˜ê¸°ìœ„í•´ì„œëŠ” `npm i core-js` íŒ¨í‚¤ì§€ë¥¼ ë³„ë„ë¡œ ì„¤ì¹˜í•´ì£¼ì–´ì•¼ í•œë‹¤.
- `polyfill` ë™ì‘ì€ `core-js` ì—ì„œ `require()` ë˜ê±°ë‚˜ êµ¬í˜„í•œ êµ¬ë¬¸ì´ ì¶”ê°€ëœë‹¤. (ì˜ˆë¥¼ ë“¤ë©´ `async`, `await` ì€ `core-js` ê°€ ì•„ë‹ˆë¼, êµ¬í˜„ì½”ë“œê°€ ì¶”ê°€ëœë‹¤)
- `async function` ê³¼ `generator` ëŠ” í´ë¦¬í•„ í•˜ê¸° ìœ„í•´ì„œ `regenerator-runtime` íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•œë‹¤. (`@babel/preset-env` ì— ë‹¤í¬í•¨ë˜ì–´ìˆë‹¤)
- `core-js` ì™€ ë§Œì•½ `@babel/polyfill` íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ `devDependencies` ê°€ ì•„ë‹Œ `dependencies` ë¡œ ë²ˆë“¤ì— í¬í•¨ë˜ë„ë¡ ì„¤ì¹˜í•´ ì£¼ëŠ” ê²ƒì´ ì˜¬ë°”ë¥´ë‹¤. (í´ë¦¬í•„ í•˜ëŠ” ë…€ì„ë“¤ì´ë‹ˆê¹Œ)
- ë°”ë²¨ì˜ config ëŠ” ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ì ìš©ë  ìˆ˜ ìˆë‹¤. (ì˜ˆë¥¼ ë“¤ë©´ `babel.config.js`, `.babelrc`, `package.json` ë“±ë“±..) ì£¼ì˜ ì‚¬í•­ìœ¼ë¡œëŠ” ê°ê°ì´ ìš°ì„ ìˆœìœ„ê°€ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì´ë‹¤. (ì˜ˆë¥¼ ë“¤ë©´ `babel.config.js` ê°€ ìš°ì„ ìˆœìœ„ê°€ ê°€ì¥ ë†’ë‹¤)
  - ìš°ì„  ìˆœìœ„ëŠ” `babel.config.js` > `.babelrc` > `package.json` ì´ë‹¤.

### ë°”ë²¨ config íŒŒì¼ ì¢…ë¥˜

> ê°ê° merge, override ê³¼ì •ì—ì„œ ìš°ì„ ìˆœìœ„ê°€ ë‹¤ë¥´ë‹¤. 

- .babel.config.*
- .babelrc.*
- .babelrc
- package.json (babel key)

### ë°”ë²¨ config ì˜µì…˜

- `@babel/cli` ì˜ ê²½ìš° `kebab-case` ë¡œ ì¶”ê°€í•´ ì¤„ ìˆ˜ ìˆë‹¤.
- `targets` ì„ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ `ES5` ì™€ í˜¸í™˜ë˜ë„ë¡ í•˜ê¸° ë•Œë¬¸ì—, ì½”ë“œëŸ‰ì„ ì¤„ì´ê¸° ìœ„í•´ì„œ ì„¤ì •í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- `"sourceType": "module" `ì„ ì„¤ì •í•˜ë©´ `import` `export` ë¬¸ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. (commonjs ëŠ” node í™˜ê²½ì´ë¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤. ì´ ì„¤ì •ì„ í•˜ë©´ esmoudle ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œëœë‹¤)
  - "script" ëŠ” `import` `export` ë¬¸ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ê³ , ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²•ìœ¼ë¡œ êµ¬ë¬¸ì„ ë¶„ì„í•œë‹¤.
  - "unambiguous" ëŠ” `import` `export` ë¬¸ë²•ì´ í¬í•¨ë˜ì–´ìˆìœ¼ë©´ esmoudle ë¡œ, ì•„ë‹ˆë©´ ìŠ¤í¬ë¦½íŠ¸ë¡œ ê°„ì£¼í•œë‹¤.

### Plugin ê³¼ Preset ì˜ ìˆœì„œ

- Plugin > Preset ìˆœì„œë¡œ ì ìš©ëœë‹¤.
- Plugin ë¼ë¦¬ëŠ” `first to last` ìˆœì„œì´ë‹¤.
- Preset ë¼ë¦¬ëŠ” `last to first` ìˆœì„œì´ë‹¤. 

### ë§ˆì§€ë§‰ ë°”ë²¨ TODO

- [x] @babel/preset-typescript ë¡œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ í•´ë³´ê¸°
  -  íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì»´íŒŒì¼ í•˜ê¸° ìœ„í•´ì„œëŠ”, `cli` ì˜ ê²½ìš° `--extensions` `.ts` ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼í•œë‹¤. `config` íŒŒì¼ì—ì„œëŠ” ì„¤ì •í•  ìˆ˜ ì—†ëŠ” ì˜µì…˜ì´ë‹¤.
- [x] ì»¤ìŠ¤í…€ ë°”ë²¨ í”ŒëŸ¬ê·¸ì¸ ë§Œë“¤ê¸°

### ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸ ë§Œë“¤ê¸°

- íƒ€ì…ì— ë”°ë¼ì„œ AST ì˜ ê° ë ˆë²¨ë“¤ì˜ êµ¬ì¡°ê°€ ë‹¤ë¥´ë‹¤.

```json5
{
  type: "FunctionDeclaration",
  id: {...},
  params: [...],
  body: {...}
}
```

```json5
{
  type: "Identifier",
  name: ...
}
```

```json5
{
  type: "BinaryExpression",
  operator: ...,
  left: {...},
  right: {...}
}
```

- plugin ì€ ê°ì²´ë¥¼ ë°˜í™˜í•´ì•¼í•˜ëŠ”ë°, `visitor` ë¼ëŠ” í‚¤ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
- `visitor` ëŠ” `key` ê°€ `AST` ì˜ `type` ì´ê³ , ì´ë¥¼ ì…ë§›ëŒ€ë¡œ ì¡°ì •í•œë‹¤.

> path ëª¨ë“ˆì„ ì‚¬ìš©í•´ì•¼, node ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë˜ëŠ” ìœ„ì¹˜ì— ìƒê´€ì—†ì´, í˜„ì¬ íŒŒì¼ì˜ ê²½ë¡œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

- `@babel/parser` ëŠ” `parse()` ë©”ì„œë“œë¥¼ í†µí•´ì„œ `AST` ë¥¼ ìƒì„±í•œë‹¤.
- `@babel/traverse` ëŠ” `traverse()` ë©”ì„œë“œë¥¼ í†µí•´ì„œ `AST` ë¥¼ íƒìƒ‰í•œë‹¤. (with `visitor`)
- `@babel/generator` ëŠ” `generate()` ë©”ì„œë“œë¥¼ í†µí•´ì„œ `AST` ë¥¼ ì½”ë“œë¡œ ë³€í™˜í•œë‹¤.
- `@babel/types` ëŠ” `types` ê°ì²´ë¥¼ í†µí•´ì„œ `AST` ë¥¼ ìƒì„± í˜¹ì€ ê²€ì¦ í•œë‹¤.
- `@babel/template` ëŠ” `template()` ë©”ì„œë“œë¥¼ í†µí•´ì„œ `AST` ë¥¼ ìƒì„±í•œë‹¤.
  - %%placeholder%% ë¥¼ í†µí•´ì„œ, `AST` ë¥¼ ìƒì„±í•  ë•Œ, `placeholder` ë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤.
  - í˜¹ì€ ëŒ€ë¬¸ìë¥¼ í†µí•´ì„œ placeholder ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## ì›¹íŒ©(Webpack)

- ì›¹íŒ©ì€ ì •ì  ëª¨ë“ˆ ë²ˆë“¤ëŸ¬ì´ë‹¤.
- webpack ì€ ê¸°ë³¸ì ìœ¼ë¡œ javascript ì™€ json ë§Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
  - í•˜ì§€ë§Œ `loader` ë¥¼ í†µí•´ì„œ ë‹¤ë¥¸ íŒŒì¼ë“¤ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- plugin ì€ ì›¹íŒ©ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆë‹¤.
  - ëŒ€ë¶€ë¶„ì€ new í‚¤ì›Œë“œë¡œ, ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•œë‹¤.
- ì›¹íŒ©ìœ¼ë¡œ ë²ˆë“¤ë§ í•˜ê¸° ì „ ì½”ë“œëŠ” `commonjs` ë‚˜ `ESModule` ë‘˜ë‹¤ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
  - ì™œëƒí•˜ë©´... ì½”ë“œëŠ” ëª¨ë“ˆì²˜ëŸ¼ ë™ì‘í•˜ë„ë¡ ë°”ê¾¸ëŠ” ê²ƒì´ê³ , ê²°êµ­ í•˜ë‚˜ì˜ ë¬¼ë¦¬ì ì¸ íŒŒì¼ë¡œ ë§Œë“¤ì–´ ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.
- ìë™ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œë“¤ì„ ì œê±°í•˜ê³ , í•©ì¹˜ë©´ì„œ ìµœì í™”í•œë‹¤.
- ì›¹íŒ©ì—ì„œ ê²½í—˜ìƒ, í•˜ë‚˜ì˜ html íŒŒì¼ì— í•˜ë‚˜ì˜ ë²ˆë“¤.js ë¥¼ ì‚½ì…í•œë‹¤. ì¦‰, multi-page(html) ê°¯ìˆ˜ ë§Œí¼ entry ë¥¼ ë§Œë“¤ì–´ ì£¼ëŠ” ê²ƒì´ ì¼ë°˜ ì ì´ë‹¤.
- `[fullhash]` ê°’ì€ webpack ì„¤ì •ë³„ë¡œ ê³ ìœ í•˜ë‹¤.(=ë³€ê²½ì‚¬í•­ì´ ì—†ìœ¼ë©´ ë™ì¼í•˜ë‹¤)
- publicPath ëŠ” `output` ì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆê³ , dev-server ì— ì˜í–¥ì„ ë¯¸ì¹œë‹¤.
  - `output` ì—ì„œ ì„¤ì •í•œ `publicPath` ëŠ” `html` ì—ì„œ `script` íƒœê·¸ì˜ `src` ì— ì ìš©ëœë‹¤.
  - `output` ì—ì„œ ì„¤ì •í•œ `publicPath` ëŠ” `css` ì—ì„œ `background-image` ì˜ `url` ì— ì ìš©ëœë‹¤.

### íë¦„ë„

Entry -> Loaders(babel, less, img...) -> Plugins(ê°œë°œí™˜ê²½, ìµœì í™”..) -> Output

### Loaders

- loader ëŠ” import ë˜ëŠ” ì‹œì ì—ì„œ ì „ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤.
- loader ì²´ì¸ì˜ ëì€ í•­ìƒ javascript ì—¬ì•¼í•˜ê³ , ì›¹íŒ©ë„ ê·¸ëŸ´ ê²ƒì´ë¼ê³  ì˜ˆìƒí•œë‹¤.

### Plugins

- webpack ì˜ ê¸°ë³¸ì´ë©°, loader ê°€ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ì¼ë“¤ì„ ì²˜ë¦¬í•œë‹¤.

### resolve

- ì›¹íŒ©ì€ ëª¨ë“ˆì„ í•´ì„í•  ë•Œ `ì ˆëŒ€ê²½ë¡œ`, `ìƒëŒ€ê²½ë¡œ`ëŠ” ê·¸ëŒ€ë¡œ ì²˜ë¦¬í•˜ê³ , `resolve` ì˜µì…˜ì„ í†µí•´ì„œ ì»¤ìŠ¤í…€ í•  ìˆ˜ ìˆë‹¤.
- `resolve` ëŠ” ëª¨ë“ˆì„ í•´ì„í•  ë•Œ, ì–´ë–¤ì‹ìœ¼ë¡œ í•´ì„í• ì§€ ì •ì˜í•œë‹¤.
- ë‹¤ë¥¸ ê²ƒ ë³´ë‹¤ ì ˆëŒ€ ê²½ë¡œë¥¼ ì„¤ì •í•  ê²½ìš°ê°€ ë§ì€ë°, `webpack` ê³¼ `tsconfig.json` ëª¨ë‘ ì„¤ì •í•´ì£¼ì–´ì•¼í•œë‹¤. ì—ë””í„°ëŠ” `config` íŒŒì¼ì„ ë”°ë¼ ë¦°íŒ…í•´ì£¼ê¸° ë•Œë¬¸ì— ë§Œì•½ webpack ë§Œ ì„¤ì •í•œë‹¤ë©´ ì˜¤ë¥˜ëŠ” ì•ˆë‚˜ì§€ë§Œ, ts-loader ì—ì„œ ê²½ê³ ë©”ì„¸ì§€, ì—ë””í„°ì—ì„œ ë¦°íŠ¸ê°€ ë°œìƒí•œë‹¤. ì•„ë˜ ì˜ˆì‹œ ì°¸ê³ 

```js
    resolve:{
        extensions:['.ts', '.js'],
        alias:{
            '@':__dirname
        },
        modules:[__dirname,'node_modules']
    }
```

#### tsconfig.json

```json
{
  "paths" : {
    "@/*" : ["./*"]
  }
}
```


#### webpack

- --watch ëŠ” íŒŒì¼ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤, ë‹¤ì‹œ ë¹Œë“œí•œë‹¤.
- webpack-dev-server --hot ì€ ë³€ê²½ëœ íŒŒì¼ë§Œ ë‹¤ì‹œ ë¹Œë“œí•œë‹¤.
- nodejs ì—ë§Œ ìˆì—ˆë˜ ëª¨ë“ˆ ì‹œìŠ¤í…œì„ ë¸Œë¼ìš°ì €ì—ë„ ë„ì…í•  ìˆ˜ ìˆê²Œ í•´ì£¼ì—ˆë‹¤.
- js ì´ì™¸ì˜ ëª¨ë“  ì—ì…‹ë„ í•œë²ˆì— ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë¬ë‹¤.

### target 

??!

### HMR(Hot Module Replacement)

- HMR ì€ ë³€ê²½ëœ ëª¨ë“ˆë§Œ ë‹¤ì‹œ ë¡œë“œí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.
- HMR ì€ `webpack-dev-server` ì—ì„œë§Œ ë™ì‘í•œë‹¤. ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ë„ ìˆë‹¤.

### Asset Management

- less, sass, scss, post-css ë“± css ì „ì²˜ë¦¬ê¸°ëŠ” `npm i {ì „ì²˜ë¦¬ê¸°}-loader` ì™€ `npm i ì „ì²˜ë¦¬ê¸°` , ì´ë ‡ê²Œ ë³´í†µ ë‘˜ë‹¤ ì„¤ì¹˜í•˜ëŠ” í˜•íƒœì´ë‹¤.
- post-css ì˜ ê²½ìš° postcss.config.js ë¥¼ loader ê°€ ìë™ ì¸ì‹í•œë‹¤. íƒ€ì…ì¶”ë¡ ì€ ë³„ë„ì˜ íŒ¨í‚¤ì§€ë¡œ ì œê³µí•˜ê³ ìˆë‹¤.

```js
/**
 * @type {import('postcss-load-config').Config}
 */
const config = {}
module.exports = config;
```

- **ì•„ë˜ ì˜ˆì‹œì²˜ëŸ¼ type ë¬¸ë²•ì€ .js ì—ë§Œ ë™ì‘í•˜ê³ , .ts ì—ì„œëŠ” ì•ˆë˜ë‹ˆ file-loader ë¥¼ ì‚¬ìš©í•´ì¤€ë‹¤.**

```js
 module: {
   rules: [
     {
       test: /\.png/,
       type: 'asset/resource'
     }
   ]
 }
```

- ì—ì…‹ ì¶”ì¶œì„ í•´ì‹œì™€ í•¨ê»˜í•œë‹¤ë©´, ì¶”í›„ ë¶ˆíŒí•´ê°€ì§„ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì„œë²„ ë¹„ìš©ì„ ì•„ë‚„ ìˆ˜ ìˆë‹¤?!
- json ì€ webpack ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ê°ì²´ë¡œ import ë¥¼ ì§€ì›í•˜ì§€ë§Œ .ts ì—ì„œëŠ” .tsconfig.json ì˜ ì„¤ì •ì— ë”°ë¥¸ë‹¤. ì•„ë˜ ë‘ê°œ ì„¤ì •ì„ í•´ì¤˜ì•¼í•œë‹¤.

```json
{
  "resolveJsonModule":true,
  "esModuleInterop":true
}
```

### optimization

- runtimeChunk:true ì˜µì…˜ì„ ë„£ì–´ ì£¼ì–´ì•¼ë§Œ, ê° ëª¨ë“ˆì„ ë‹¨ í•œë²ˆë§Œ í˜¸ì¶œí•œë‹¤.
  - ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ ë³„ë¡œ ê°ê° ëª¨ë“ˆì„ ì¤‘ë³µì ìœ¼ë¡œ import í•œë‹¤.

### output

- clean:true ì†ì„±ìœ¼ë¡œ ë²ˆë“¤ì „ í´ë”ë¥¼ ë¹„ìš´ë‹¤.

### Development

- `devtool: 'inline-source-map'` ì˜µì…˜ìœ¼ë¡œ ë””ë²„ê¹…ì„ í•œë‹¤. ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ í•­ìƒ ë²ˆë“¤ëœ í•˜ë‚˜ì˜ js ë§Œì„ ê°€ë¥´í‚¨ë‹¤.
- watch, webpack-dev-server, webpack-dev-middleware ì´ ìˆë‹¤.

#### watch

- ëª¨ë“  ì½”ë“œë¥¼ ê°ì‹œí•˜ë©°, ì „ì²´ ë¹Œë“œë¥¼ ì¬ìˆ˜í–‰í•œë‹¤. ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì–´ì•¼í•œë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.

### Code Splitting

- ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ë¡œ ë¶„ë¦¬
- ë™ì  import ë¡œ ê°œë³„ ë¡œë”©

### Caching

- ë„¤ì´ë°ì— `[contenthash]` ëŠ” ë§ˆì¹˜ Etag ì²˜ëŸ¼ ë³€ê²½ì‚¬í•­ì´ ì—†ë‹¤ë©´ ìœ ì§€ëœë‹¤. ì´ê²ƒìœ¼ë¡œ ë²ˆë“¤ ê²°ê³¼ê°€ ìºì‹±ë¬ëŠ”ì§€ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.
- ì•„ë˜ì²˜ëŸ¼ ì™¸ë¶€ ëª¨ë“ˆì„ ìºì‹±í•˜ëŠ” ë°©ë²•ì´ë¼ê³  ì†Œê°œí•˜ëŠ”ë°, ì´ë ‡ê²Œ ì•ˆí•´ë„ ì•Œì•„ì„œ ìºì‹±ì´ ë˜ê³ ìˆëŠ”ê±° ê°™ë‹¤.

```js
    optimization: {
      runtimeChunk: 'single',
     splitChunks: {
       cacheGroups: {
         vendor: {
           test: /[\\/]node_modules[\\/]/,
           name: 'vendors',
           chunks: 'all',
         },
       },
  };
```

### ë¼ì´ë¸ŒëŸ¬ë¦¬ ë§Œë“¤ê¸°

- ê¸°ë³¸ì ìœ¼ë¡œ ì›¹íŒ©ì„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë“œë¡œí•˜ë©´, script íƒœê·¸ ì „ìš©ìœ¼ë¡œ ë²ˆë“¤ë§í•œë‹¤.
  - `globalObject` ì˜ ê°ì²´ì— ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë²ˆë“¤ë§í•œë‹¤. ì˜ˆë¥¼ë“¤ë©´ uuid ë¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ë©´ `window.[ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë¦„].uuid()` ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.
- node í™˜ê²½, script ë¡œ ì¶”ê°€í•´ì„œ window ì— ì¶”ê°€ í•˜ëŠ”, ë‘˜ë‹¤ ì§€ì›í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì€ ì„¤ì •ì„ ì¶”ê°€í•´ì¤€ë‹¤.

```js
globalObject: 'this'
libraryTarget: 'umd'
```

- export default ë¡œ ì‘ì„±í•˜ë©´, `ëª¨ë“ˆì´ë¦„.default` ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.

### CLI ë¡œ ENV ì „ë‹¬í•˜ê¸°


1. `webpack.config.js` ì—ì„œ `module.exports = (env)=>{}` ë¡œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.

```js
module.exports = (env)=> {
    console.log(env)
    return {
        entry: './src/uuid.js',
        output: {
            filename: `${env.output}.js`,
            path: path.resolve(__dirname, 'dist'),
            library: 'uuid',
            globalObject: 'this',
            libraryTarget: 'umd',
        },
    }
}
```

2. `package.json` ì—ì„œ `--env` ë¡œ ì „ë‹¬í•œë‹¤.
  
```bash
webpack --env output=uuid
```

### ë¹Œë“œ í¬í¼ë¨¼ìŠ¤ ê¿€íŒ ë“¤

[ë¬¸ì„œ](https://webpack.kr/guides/build-performance/)


### Tree shaking

- ì´ê±´ ë¬¸ì„œì—ëŠ” development ëª¨ë“œì—ì„œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•˜ëŠ”ë°, ë˜ê³ ìˆê³ , ë³„ë„ì˜ ì„¤ì •ì„ í•˜ì§€ ì•Šì•„ë„ ì‘ë™í•˜ê³ ìˆë‹¤.

